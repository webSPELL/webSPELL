<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="description" content="Clanpage using webSPELL 4 CMS">
	<meta name="author" content="webspell.org">
	<meta name="keywords" content="webspell, webspell4, clan, cms">
	<meta name="copyright" content="Copyright &copy; 2005 - 2011 by webspell.org">
	<meta name="generator" content="webSPELL">

	<!-- Head & Title include -->
	<title>%new_post%</title>
	<base href="$rewriteBase">
	<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
	<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css"
			rel="stylesheet">

	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

	<script src="js/bbcode.js"></script>
	<!-- end Head & Title include -->
	<script>
		<!--
		var default_language = "de",
				message = [],
				headline = [],
				langs = [];

		news_languages = [];
		function MM_openBrWindow(theURL, winName, features) { //v2.0
			window.open(theURL, winName, features);
		}

		function update_language() {
			var i,
					z,
					delete_array = [],
					option;

			for (i = 0; i < news_languages.length; i++) {
				delete_array[i] = [0, null];
			}
			for (i = 0; i < langs.length; i++) {
				option = document.getElementById('lang_' + i);
				for (z = 0; z < news_languages.length; z++) {
					if (option.options[z].selected == true) {
						delete_array[z][0] = 1;
						delete_array[z][1] = i;
					}
				}
			}
			for (i = 0; i < langs.length; i++) {
				option = document.getElementById('lang_' + i);
				for (z = 0; z < news_languages.length; z++) {
					if (delete_array[z][0] == 1 && delete_array[z][1] != i) {
						option.options[z].disabled = true;
						option.options[z].style.backgroundColor = '#B10000';
						option.options[z].style.display = 'none';
					} else {
						option.options[z].disabled = false;
						option.options[z].style.backgroundColor = '#FFFFFF';
						option.options[z].style.display = '';
					}
				}
			}
		}

		function initialize_language() {
			var delete_array = [],
					i,
					z,
					option,
					new_option;
			for (i = 0; i < news_languages.length; i++) {
				delete_array[i] = 0;
			}
			for (i = 0; i < langs.length; i++) {
				option = document.getElementById('lang_' + i);
				for (z = 0; z < news_languages.length; z++) {
					new_option = new Option(news_languages[z][1], news_languages[z][0], false, false);
					option.options[z] = new_option;
					if (langs[i] != '') {
						if (langs[i] == news_languages[z][0]) {
							option.options[z].selected = true;
							delete_array[z] = 1;
						}
					} else if (i == 0 && news_languages[z][0] == default_language) {
						option.options[z].selected = true;
						delete_array[z] = 1;
						langs[i] = news_languages[z][0];
					} else if (i != 0 && delete_array[z] == 0) {
						option.options[z].selected = true;
						delete_array[z] = 1;
						langs[i] = news_languages[z][0];
					}
				}
			}
		}

		function update_textarea(value) {
			var message_length,
					i;

			document.getElementById('news_textarea').innerHTML = '';
			for (i = 0; i < value; i++) {
				if (message[i] || headline[i] || langs[i] && langs[i] != default_language) {
					document.getElementById('news_textarea')
							.innerHTML += '<select name="lang[]" id="lang_' + i + '" ' +
					'onchange="langs[' + i + ']=this.value; update_language();">' +
					'</select> %headline% ' +
					'<input name="headline[]" ' +
					'type="text" ' +
					'value="' + headline[i] + '" ' +
					'size="80" ' +
					'onchange="headline[' + i + ']=this.value;">' +
					'<textarea name="message[' + i + ']" ' +
					'rows="20" ' +
					'cols="130" ' +
					'style="width: 750px;" ' +
					'onfocus="which=this;textarea = \'message[' + i + ']\';" ' +
					'onblur="message[' + i + ']=this.value;" ' +
					'onchange="message[' + i + ']=this.value;">' + message[i] +
					'</textarea><br><br>';
				} else {
					message[i] = '';
					headline[i] = '';
					langs[i] = '';
					document.getElementById('news_textarea')
							.innerHTML += '<select name="lang[]" id="lang_' + i + '" ' +
					'onchange="langs[' + i + ']=this.value; update_language();"></select> ' +
					'%headline% <input name="headline[]" ' +
					'type="text" ' +
					'value="" ' +
					'size="80" ' +
					'onchange="headline[' + i + ']=this.value;">' +
					'<textarea name="message[' + i + ']" ' +
					'rows="20" ' +
					'cols="130" ' +
					'style="width: 750px;" ' +
					'onfocus="which=this;textarea = \'message[' + i + ']\';" ' +
					'onblur="message[' + i + ']=this.value;" ' +
					'onchange="message[' + i + ']=this.value;"></textarea><br><br>';
				}
			}
			if (message.length > value) {
				message_length = message.length;

				for (i = value; i < message_length; i++) {
					delete message[i];
					message.length--;
					delete headline[i];
					headline.length--;
					delete langs[i];
					langs.length--;
				}
			}

			initialize_language();
			update_language();
		}

		function chkFormular() {
			var message_text = '',
					x = 0;

			if (document.getElementsByName('headline[]')[0].value == "") {
				alert("%enter_title%");
				document.getElementsByName('headline[]')[0].focus();

				return false;
			}

			if (message[0] == "" || typeof message[0] == undefined) {
				alert("%enter_text%");

				return false;
			}

			while (true) {
				if (message[x]) {
					message_text += message[x];
					x++;
				} else {
					break;
				}
			}
			if (!validbbcode(message_text)) {

				return false;
			}

		}
		-->
	</script>
	<style type="text/css">
		body {
			margin: 0px;
		}
	</style>
</head>
<body>
<form action="news.php?action=save" method="post" enctype="multipart/form-data" id="post"
		name="post" onsubmit="return chkFormular();">
	<table width="100%" border="0" cellspacing="0" cellpadding="2" bgcolor="$border">
		<tr>
			<td class="title" align="center" bgcolor="$bghead">%new_post%</td>
		</tr>
		<tr>
			<td bgcolor="$pagebg"></td>
		</tr>
		<tr>
			<td bgcolor="$bg1">
				<table width="100%" border="0" cellspacing="0" cellpadding="0">
					<tr>
						<td valign="top">$addbbcode</td>
						<td valign="top">$addflags</td>
					</tr>
				</table>
				<hr>
				<table width="100%" border="0" cellspacing="0" cellpadding="2">
					<tr>
						<td><b>%rubric%:</b> <select name="rubric">$rubrics</select>
							<input name="button" type="button" onclick="MM_openBrWindow(
									'upload.php?newsID=$newsID',
									'Upload',
									'scrollbars=yes,width=800,height=600')" value="%upload_images%">
							&nbsp;&nbsp;&nbsp;
							<small><b>%options%:</b> &#8226; %html% &#8226; <a href="javascript:MM_openBrWindow(
									'code.php',
									'BBCode',
									'scrollbars=yes,width=600,height=500')">%bbcode%</a>
								&#8226; <a href="javascript:MM_openBrWindow(
										'smileys.php',
										'Smileys',
										'scrollbars=yes,width=340,height=500')">%smilies%</a>
							</small>
						</td>
					</tr>
					<tr>
						<td>
							<hr>
						</td>
					</tr>
					<tr>
						<td>
							<table width="100%" border="0" cellspacing="0" cellpadding="2">
								<tr>
									<td><b>%options%</b></td>
									<td><b>%languages%:</b></td>
								</tr>
								<tr>
									<td><i>%topnews%:</i>&nbsp;&nbsp;
										<select name="topnews">$topnews</select>
										<i>%intern%:</i>&nbsp;&nbsp;
										<select name="intern">$intern</select>
									</td>
									<td>%post_languages%</td>
								</tr>
								<tr>
									<td colspan="2">
										<b>Tags:</b> <input type="text" name="tags" value="$tags">
									</td>
								</tr>
							</table>
						</td>
					</tr>
					<tr>
						<td>
							<hr>
						</td>
					</tr>
				</table>
				<div id="news_textarea"></div>
				<script>
					/* <![CDATA[ */
					update_textarea($langcount);
					/* ]]> */
				</script>
				<hr>
				<table width="100%" border="0" cellpadding="0" cellspacing="2">
					<tr>
						<td valign="top">%link% 1:
							<input name="link1" type="text" value="$link1">
							<input name="url1" type="text" value="$url1">
							<input class="input" name="window1" type="radio" value="1" $window1_new>
							%new_window%
							<input class="input" type="radio" name="window1" value="0"
							$window1_self>
							%self%
							<br>
							%link% 2:
							<input name="link2" type="text" value="$link2">
							<input name="url2" type="text" value="$url2">
							<input class="input" name="window2" type="radio" value="1" $window2_new>
							%new_window%
							<input class="input" type="radio" name="window2" value="0"
							$window2_self>
							%self%
							<br>
							%link% 3:
							<input name="link3" type="text" value="$link3">
							<input name="url3" type="text" value="$url3">
							<input class="input" name="window3" type="radio" value="1" $window3_new>
							%new_window%
							<input class="input" type="radio" name="window3" value="0"
							$window3_self>
							%self%
							<br>
							%link% 4:
							<input name="link4" type="text" value="$link4">
							<input name="url4" type="text" value="$url4">
							<input class="input" name="window4" type="radio" value="1" $window4_new>
							%new_window%
							<input class="input" type="radio" name="window4" value="0"
							$window4_self>
							%self%
						</td>
						<td valign="top"><br>&nbsp;</td>
					</tr>
					<tr>
						<td colspan="5">
							<hr>
						</td>
					</tr>
					<tr align="right">
						<td colspan="2">
							<input type="hidden" name="userID" value="$userID">
							<input type="hidden" name="newsID" value="$newsID">
							<select name="comments">$comments</select>
							<input type="submit" name="preview" value="%preview%">
							<input type="submit" name="save" value="%save_news%">
							<input type="button" onclick="window.close()" value="%cancel%"></td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
</form>
</body>
</html>
