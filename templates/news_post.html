<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="description" content="Clanpage using webSPELL 4 CMS">
	<meta name="author" content="webspell.org">
	<meta name="keywords" content="webspell, webspell4, clan, cms">
	<meta name="copyright" content="Copyright &copy; 2005 - 2011 by webspell.org">
	<meta name="generator" content="webSPELL">

    <!-- Head & Title include -->
	<title>%new_post%</title>
	<link href="components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="components/fontawesome/css/font-awesome.min.css" rel="stylesheet">

	<!-- end Head & Title include -->
	<script language="JavaScript" type="text/JavaScript">
	<!--         
	function MM_openBrWindow(theURL,winName,features) { //v2.0
	  window.open(theURL,winName,features);
	}

	default_language = "de";

	message = new Array();
	headline = new Array();
	langs = new Array();

	news_languages = new Array();
	$langs

	function update_language() {
		delete_array = new Array();
		for(var i = 0; i < news_languages.length; i++) {
			delete_array[i] = new Array(0, null);
		}
		for(var i = 0; i < langs.length; i++) {
			option = document.getElementById('lang_' + i);
			for(var z = 0; z < news_languages.length; z++) {
				if(option.options[z].selected == true) {
					delete_array[z][0] = 1;
					delete_array[z][1] = i;
				}
			}
		}
		for(var i = 0; i < langs.length; i++) {
			option = document.getElementById('lang_' + i);
			for(var z = 0; z < news_languages.length; z++) {
				if(delete_array[z][0] == 1 && delete_array[z][1] != i) {
					option.options[z].disabled = true;
					option.options[z].style.backgroundColor = '#B10000';
					option.options[z].style.display = 'none';
				}
				else {
					option.options[z].disabled = false;
					option.options[z].style.backgroundColor = '#FFFFFF';
					option.options[z].style.display = '';
				}
			}
		}
	}

	function initialize_language() {
		delete_array = new Array();
		for(var i = 0; i < news_languages.length; i++) {
			delete_array[i] = 0;
		}
		for(var i = 0; i < langs.length; i++) {
			option = document.getElementById('lang_' + i);
			for(var z = 0; z < news_languages.length; z++) {
				new_option = new Option(news_languages[z][1], news_languages[z][0], false, false);
				option.options[z] = new_option;
				if(langs[i] != '') {
					if(langs[i] == news_languages[z][0]) {
						option.options[z].selected = true;
						delete_array[z] = 1;
					}
				}
				else if(i == 0 && news_languages[z][0] == default_language) {
					option.options[z].selected = true;
					delete_array[z] = 1;
					langs[i] = news_languages[z][0];
				}
				else if(i != 0 && delete_array[z] == 0) {
					option.options[z].selected = true;
					delete_array[z] = 1;
					langs[i] = news_languages[z][0];
				}
			}
		}
	}
	function update_textarea(value) {
		document.getElementById('news_textarea').innerHTML='';
		for(var i = 0; i < value; i++) {
			if(message[i] || headline[i] || langs[i] && langs[i] != default_language)
			{
				document.getElementById('news_textarea').innerHTML+='<div class="form-group"><div class="input-group"><span class="input-group-addon"><select name="lang[]" id="lang_' + i + '" onchange="langs['+i+']=this.value; update_language();" class="form-control"></select></span><input name="headline[]" type="text" value="'+headline[i]+'" onchange="headline['+i+']=this.value;" class="form-control"></div></div><div class="form-group"><textarea name="message[' + i + ']" onfocus="which=this;textarea = \'message[' + i + ']\';" onblur="message['+i+']=this.value;" onchange="message['+i+']=this.value;" style="width:99%" rows="12" class="form-control">'+message[i]+'</textarea></div>';
			}
			else
			{
				message[i] = '';
				headline[i] = '';
				langs[i] = '';
				document.getElementById('news_textarea').innerHTML+='<div class="form-group"><label for="headline">%headline%</label><div class="input-group"><span class="input-group-addon"><select name="lang[]" id="lang_' + i + '" onchange="langs['+i+']=this.value; update_language();"></select></span><input name="headline[]" type="text" value="" onchange="headline['+i+']=this.value;" class="form-control"></div></div><div class="form-group"><textarea name="message[' + i + ']" onfocus="which=this;textarea = \'message[' + i + ']\';" onblur="message['+i+']=this.value;" onchange="message['+i+']=this.value;" rows="12" class="form-control"></textarea></div>';
			}
		}
		if(message.length > value) {
			var message_length = message.length;
			for(var i = value; i < message_length; i++) {
				delete message[i];
				message.length--;
				delete headline[i];
				headline.length--;
				delete langs[i];
				langs.length--;
			}
		}
		
		initialize_language();
		update_language();
	}

	function chkFormular() {
		
		if(document.getElementsByName('headline[]')[0].value == "") {
			alert("%enter_title%");
			document.getElementsByName('headline[]')[0].focus();
			return false;
		}
		
		if(message[0] == "" || typeof message[0] == undefined) {
			alert("%enter_text%");
			return false;
		}
		message_text = '';
		x = 0;
		while(true){
			if(message[x]){
				message_text += message[x];
				x++;
			}
			else{
				break;
			}
		}
		if(!validbbcode(message_text)){
			return false;
		}
		
	}

	$message_vars
	$headline_vars
	$langs_vars
	-->
	</script>
</head>
<body>
<form action="news.php?action=save" method="post" enctype="multipart/form-data" id="post" name="post" onsubmit="return chkFormular();">
    <div class="container">
        <h2>%new_post%</h2>
        
        <div class="panel-group" id="accordion">
            <div class="panel panel-default">
                <div class="panel-heading">
                <h4 class="panel-title">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">%rubric%</a>
                </h4>
                </div>
                <div id="collapseOne" class="panel-collapse collapse in">
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <b>%rubric%:</b> 
                            <div class="input-group">
                                <select name="rubric" class="form-control">$rubrics</select>
                                <span class="input-group-btn"><input name="button" type="button" onclick="MM_openBrWindow('upload.php?newsID=$newsID','Upload','scrollbars=yes,width=800,height=600')" value="%upload_images%" class="btn btn-danger"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">Options</a>
                    </h4>
                </div>
                <div id="collapseTwo" class="panel-collapse collapse">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-xs-6">
                                <div class="form-group">
                                    <label for="topnews">%topnews%:</label>
                                    <select name="topnews" class="form-control">$topnews</select>
                                </div>
                                
                                <div class="form-group">
                                    <label>%intern%:</label>
                                    <select name="intern" class="form-control">$intern</select>
                                </div>  
                            </div>
                        
                            <div class="col-xs-6">
                                <div class="form-group">
                                    <label for="language_count">News in</label>
                                    <div class="input-group">
                                        <select name="language_count" onchange="update_textarea(this.options[this.selectedIndex].value)" class="form-control">$selects</select>
                                        <span class="input-group-addon">languages</span>
                                    </div>
                                </div>
                            
                                <div class="form-group text-right">
                                    <select name="comments" class="form-control">$comments</select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseThree">Links</a>
                    </h4>
                </div>
                <div id="collapseThree" class="panel-collapse collapse">
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-xs-1">%link% 1:</div>
                                <div class="col-xs-4"><input name="link1" type="text" value="$link1" class="form-control"></div>
                                <div class="col-xs-4"><input name="url1" type="text" value="$url1" class="form-control"></div>
                                <div class="col-xs-3">
                                <input class="input" name="window1" type="radio" value="1" $window1_new>
                                %new_window%
                                <input class="input" type="radio" name="window1" value="0" $window1_self>
                                %self%
                                </div>  
                            </div>
                            
                            <div class="form-group">
                                <div class="col-xs-1">%link% 2:</div>
                                <div class="col-xs-4"><input name="link2" type="text" value="$link2" class="form-control"></div>
                                <div class="col-xs-4"><input name="url2" type="text" value="$url2" class="form-control"></div>
                                <div class="col-xs-3">
                                <input class="input" name="window2" type="radio" value="1" $window2_new>
                                %new_window%
                                <input class="input" type="radio" name="window2" value="0" $window2_self>
                                %self%
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <div class="col-xs-1">%link% 3:</div>
                                <div class="col-xs-4"><input name="link3" type="text" value="$link3" class="form-control"></div>
                                <div class="col-xs-4"><input name="url3" type="text" value="$url3" class="form-control"></div>
                                <div class="col-xs-3">
                                <input class="input" name="window3" type="radio" value="1" $window3_new>
                                %new_window%
                                <input class="input" type="radio" name="window3" value="0" $window3_self>
                                %self%
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <div class="col-xs-1">%link% 4:</div>
                                <div class="col-xs-4"><input name="link4" type="text" value="$link4" class="form-control"></div>
                                <div class="col-xs-4"><input name="url4" type="text" value="$url4" class="form-control"></div>
                                <div class="col-xs-3">
                                <input class="input" name="window4" type="radio" value="1" $window4_new>
                                %new_window%
                                <input class="input" type="radio" name="window4" value="0" $window4_self>
                                %self%
                                </div>
                            </div>
                            
                            <input type="hidden" name="userID" value="$userID">
                            <input type="hidden" name="newsID" value="$newsID"> 
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseFour">BBCode and Flags</a>
                    </h4>
                </div>
                <div id="collapseFour" class="panel-collapse collapse">
                    <div class="panel-body">
                        $addbbcode
                        $addflags
                    </div>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 10px;">
            <div id="news_textarea"></div>
                <div class="form-group">
                    <input type="submit" name="save" value="%save_news%" class="btn btn-danger">
                    <input type="submit" name="preview" value="%preview%" class="btn btn-primary">
                </div>
            </div>
        </div>
    
	<script language="JavaScript" type="text/javascript">
	/* <![CDATA[ */
	update_textarea($langcount);
	/* ]]> */
	</script>
</form>
<script src="js/bbcode.js" language="jscript" type="text/javascript"></script>
<script src="components/jquery/dist/jquery.min.js"></script>
<script src="components/bootstrap/dist/js/bootstrap.min.js"></script>
</body>
</html>